<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- <mapper namespace="com.mybatis.mapper.UserMapper2"> -->
<mapper namespace="com.mybatis.dao.UserMapper">

  <!-- 需求：通过id查询用户 -->
    <select id="findUserById" parameterType="int" resultType="com.mybatis.po.User">
        select * from user where id = #{id}
    </select>
    <!-- 根据用户名称模糊查询用户信息，可能返回多条 -->
    <select id="findUserByName" parameterType="java.lang.String" resultType="com.mybatis.po.User">
        select * from user where username like '%${value}%'
    </select>
    
    <select id="findUserList" parameterType="com.mybatis.po.UserQueryVo" resultType="com.mybatis.po.User">
		select * from user where user.sex = #{user.sex} and user.username like '%${user.username}%'
	</select>
	<select id="findUserList2" parameterType="com.mybatis.po.UserQueryVo" resultType="com.mybatis.po.User">
		select * from user
	<!-- where可以自动去掉条件中的第一个and -->
	<where>
		<if test="user!=null">
		<if test="user.sex!=null and user.sex!=''">
			and user.sex = #{user.sex}
		</if>
		<if test="user.username!=null and user.username!=''">
			and user.username like '%${user.username}%'
		</if>
		</if>
	</where>
	</select>

	<resultMap type="com.mybatis.po.User" id="userResultMap">
		<id column="id_" property="id"/>
		<result column="username_" property="username"/>
	</resultMap>
	<select id="findUserByIdResultMap" parameterType="int" resultMap="userResultMap">
		SELECT id id_,username username_ from user where id = #{id}
	</select>
	
	




</mapper>